Домашнее задание к занятию 2 «Работа с Playbook»
Подготовка к выполнению
Необязательно. Изучите, что такое ClickHouse и Vector.
Создайте свой публичный репозиторий на GitHub с произвольным именем или используйте старый.
Скачайте Playbook из репозитория с домашним заданием и перенесите его в свой репозиторий.
Подготовьте хосты в соответствии с группами из предподготовленного playbook.
Основная часть
Подготовьте свой inventory-файл prod.yml.
Допишите playbook: нужно сделать ещё один play, который устанавливает и настраивает vector. Конфигурация vector должна деплоиться через template файл jinja2. От вас не требуется использовать все возможности шаблонизатора, просто вставьте стандартный конфиг в template файл. Информация по шаблонам по ссылке. не забудьте сделать handler на перезапуск vector в случае изменения конфигурации!
При создании tasks рекомендую использовать модули: get_url, template, unarchive, file.
Tasks должны: скачать дистрибутив нужной версии, выполнить распаковку в выбранную директорию, установить vector.
Запустите ansible-lint site.yml и исправьте ошибки, если они есть.
Попробуйте запустить playbook на этом окружении с флагом --check.
Запустите playbook на prod.yml окружении с флагом --diff. Убедитесь, что изменения на системе произведены.
Повторно запустите playbook с флагом --diff и убедитесь, что playbook идемпотентен.
Подготовьте README.md-файл по своему playbook. В нём должно быть описано: что делает playbook, какие у него есть параметры и теги. Пример качественной документации ansible playbook по ссылке. Так же приложите скриншоты выполнения заданий №5-8
Готовый playbook выложите в свой репозиторий, поставьте тег 08-ansible-02-playbook на фиксирующий коммит, в ответ предоставьте ссылку на него.

Решение:

<img width="514" alt="image" src="https://github.com/user-attachments/assets/a7b6eb6c-c691-4b05-98fc-4a32e82e4cf0">

<img width="703" alt="image" src="https://github.com/user-attachments/assets/e624de21-0b5b-4245-8cb1-e2cf91826324">

<img width="722" alt="image" src="https://github.com/user-attachments/assets/262e433e-b74b-4bbf-a766-74e593e28476">
